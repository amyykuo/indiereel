class RoleValidator < ActiveModel::Validator
  def validate(record)
    record.errors[:base] << "You cannot have more than one of any given role." unless Role.find_by_name_and_user_id(record.name, record.user.id).nil?
  end
end

class Role < ActiveRecord::Base
  belongs_to :user
  validates_with RoleValidator
  
  before_create :set_profile_pic_to_default_pic
  
  
  def self.options
    ['Talent', 'Director', 'Producer', 'Crew']
  end
  
  #TODO - specify a default profile picture
  def set_profile_pic_to_default_pic
    self.profile_pic = "path to default role pic"
  end
  
end
